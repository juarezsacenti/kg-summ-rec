### BUILD:  docker build -t gemsec:1.0 .
### RUN:    docker run --rm -it --gpus all gemsec:1.0 $CMD

FROM tensorflow/tensorflow:1.12.0-gpu-py3
# CONTENT
# python=3.5.2
# numpy=1.15.4
# scipy=1.1.0
# tensorflow-gpu=1.12.0

# 1. Install git
RUN apt-get update
RUN apt-get install -y git

# 2. Download project
RUN git clone https://github.com/benedekrozemberczki/GEMSEC.git

RUN pip3 install networkx==2.4
RUN pip3 install tqdm==4.19.5
RUN pip3 install numpy==1.13.3
RUN pip3 install pandas==0.20.3
RUN pip3 install jsonschema==2.6.0
RUN pip3 install texttable==1.5.0
RUN pip3 install python-louvain==0.11

# 3. Convert input format

# 4. Run application
# or --dataset book, use -h to check optional arguments in main.py
CMD cd /notebooks/GEMSEC \
    && python3 src/embedding_clustering.py
